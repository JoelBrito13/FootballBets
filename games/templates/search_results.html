{% extends 'base.html' %}
{% load staticfiles %}

{% block extra_content %}

<h1>Search Results</h1>

  {% if games %}
    <ul>
      {% for game in games %}
        <li>
          <ul>
            <p> Home: {{ game.match_hometeam_name }} vs. Away: {{ game.match_awayteam_name }}</p>
            <ul>
              <p>Date: {{ game.match_date }}</p>
            {% if not game.match_status == 'Finished' %}
              <p>Match status: To happen</p>
                <form action='/bets/register/' method="post">
                    {% csrf_token %}
                  <ul>
                    <p>Chances:</p>
                    <p>
                    <label>
                      <input type="checkbox" class="radio" name="game_bet" value="HW"> {{game.match_hometeam_name}} Win ({{ game.prob_HW }}%)
                      <input type="checkbox" class="radio" name="game_bet" value="D"> Draw ({{ game.prob_D }}%)
                      <input type="checkbox" class="radio" name="game_bet" value="AW"> {{ game.match_awayteam_name }}Win ({{ game.prob_AW }}%)
                      <script>
                        $('input[type="checkbox"]').on('change', function() {
                        $(this).siblings('input[type="checkbox"]').prop('checked', false);
                        });
                      </script>
                      <input type="text" name="game" value="{{ game.match_id }}" hidden>
                      <input type="text" name="amount" placeholder="Amount">
                      <input type="submit" value="Bet">
                      {{ form }}
                    </label>
                </p>
                  </ul>
                </form>

            {% else %}
              <p> Score: {{ game.match_hometeam_score }} : {{ game.match_awayteam_score }}</p>
              <p>Match status: {{ game.match_status }}</p>
            {% endif %}
            </ul>
          </ul>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No results found</p>
  {% endif %}
{% endblock %}


